{"version":3,"file":"intersectional-observer.js","names":["window","_typeof","IntersectionObserverEntry","prototype","Object","defineProperty","get","intersectionRatio","document","registry","entry","time","target","rootBounds","boundingClientRect","intersectionRect","getEmptyRect","isIntersecting","targetRect","targetArea","width","height","intersectionArea","Number","toFixed","IntersectionObserver","callback","opt_options","options","Error","root","nodeType","_checkForIntersections","throttle","bind","THROTTLE_TIMEOUT","_callback","_observationTargets","_queuedEntries","_rootMarginValues","_parseRootMargin","rootMargin","thresholds","_initThresholds","threshold","map","margin","value","unit","join","POLL_INTERVAL","USE_MUTATION_OBSERVER","observe","isTargetAlreadyObserved","some","item","element","_registerInstance","push","_monitorIntersections","unobserve","filter","length","_unmonitorIntersections","_unregisterInstance","disconnect","takeRecords","records","slice","opt_threshold","Array","isArray","sort","t","i","a","isNaN","opt_rootMargin","marginString","margins","split","parts","exec","parseFloat","_monitoringIntersections","_monitoringInterval","setInterval","addEvent","_domObserver","MutationObserver","attributes","childList","characterData","subtree","clearInterval","removeEvent","rootIsInDom","_rootIsInDom","rootRect","_getRootRect","forEach","getBoundingClientRect","rootContainsTarget","_rootContainsTarget","oldEntry","_computeTargetAndRootIntersection","newEntry","now","_hasCrossedThreshold","getComputedStyle","display","parent","getParentNode","atRoot","parentRect","parentComputedStyle","body","documentElement","overflow","computeRectIntersection","html","top","left","right","clientWidth","bottom","clientHeight","_expandRectByRootMargin","rect","newRect","oldRatio","newRatio","containsDeep","indexOf","index","splice","performance","fn","timeout","timer","setTimeout","node","event","opt_useCapture","addEventListener","attachEvent","removeEventListener","detatchEvent","rect1","rect2","Math","max","min","el","err","child","parentNode","host","assignedSlot"],"sources":["../../../../src/styles/js/intersectional-observer.js"],"sourcesContent":["(function(){'use strict';if(typeof window!=='object'){return;}\r\nif('IntersectionObserver'in window&&'IntersectionObserverEntry'in window&&'intersectionRatio'in window.IntersectionObserverEntry.prototype){if(!('isIntersecting'in window.IntersectionObserverEntry.prototype)){Object.defineProperty(window.IntersectionObserverEntry.prototype,'isIntersecting',{get:function(){return this.intersectionRatio>0;}});}\r\nreturn;}\r\nvar document=window.document;var registry=[];function IntersectionObserverEntry(entry){this.time=entry.time;this.target=entry.target;this.rootBounds=entry.rootBounds;this.boundingClientRect=entry.boundingClientRect;this.intersectionRect=entry.intersectionRect||getEmptyRect();this.isIntersecting=!!entry.intersectionRect;var targetRect=this.boundingClientRect;var targetArea=targetRect.width*targetRect.height;var intersectionRect=this.intersectionRect;var intersectionArea=intersectionRect.width*intersectionRect.height;if(targetArea){this.intersectionRatio=Number((intersectionArea/targetArea).toFixed(4));}else{this.intersectionRatio=this.isIntersecting?1:0;}}\r\nfunction IntersectionObserver(callback,opt_options){var options=opt_options||{};if(typeof callback!='function'){throw new Error('callback must be a function');}\r\nif(options.root&&options.root.nodeType!=1){throw new Error('root must be an Element');}\r\nthis._checkForIntersections=throttle(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT);this._callback=callback;this._observationTargets=[];this._queuedEntries=[];this._rootMarginValues=this._parseRootMargin(options.rootMargin);this.thresholds=this._initThresholds(options.threshold);this.root=options.root||null;this.rootMargin=this._rootMarginValues.map(function(margin){return margin.value+margin.unit;}).join(' ');}\r\nIntersectionObserver.prototype.THROTTLE_TIMEOUT=100;IntersectionObserver.prototype.POLL_INTERVAL=null;IntersectionObserver.prototype.USE_MUTATION_OBSERVER=true;IntersectionObserver.prototype.observe=function(target){var isTargetAlreadyObserved=this._observationTargets.some(function(item){return item.element==target;});if(isTargetAlreadyObserved){return;}\r\nif(!(target&&target.nodeType==1)){throw new Error('target must be an Element');}\r\nthis._registerInstance();this._observationTargets.push({element:target,entry:null});this._monitorIntersections();this._checkForIntersections();};IntersectionObserver.prototype.unobserve=function(target){this._observationTargets=this._observationTargets.filter(function(item){return item.element!=target;});if(!this._observationTargets.length){this._unmonitorIntersections();this._unregisterInstance();}};IntersectionObserver.prototype.disconnect=function(){this._observationTargets=[];this._unmonitorIntersections();this._unregisterInstance();};IntersectionObserver.prototype.takeRecords=function(){var records=this._queuedEntries.slice();this._queuedEntries=[];return records;};IntersectionObserver.prototype._initThresholds=function(opt_threshold){var threshold=opt_threshold||[0];if(!Array.isArray(threshold))threshold=[threshold];return threshold.sort().filter(function(t,i,a){if(typeof t!='number'||isNaN(t)||t<0||t>1){throw new Error('threshold must be a number between 0 and 1 inclusively');}\r\nreturn t!==a[i-1];});};IntersectionObserver.prototype._parseRootMargin=function(opt_rootMargin){var marginString=opt_rootMargin||'0px';var margins=marginString.split(/\\s+/).map(function(margin){var parts=/^(-?\\d*\\.?\\d+)(px|%)$/.exec(margin);if(!parts){throw new Error('rootMargin must be specified in pixels or percent');}\r\nreturn{value:parseFloat(parts[1]),unit:parts[2]};});margins[1]=margins[1]||margins[0];margins[2]=margins[2]||margins[0];margins[3]=margins[3]||margins[1];return margins;};IntersectionObserver.prototype._monitorIntersections=function(){if(!this._monitoringIntersections){this._monitoringIntersections=true;if(this.POLL_INTERVAL){this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL);}\r\nelse{addEvent(window,'resize',this._checkForIntersections,true);addEvent(document,'scroll',this._checkForIntersections,true);if(this.USE_MUTATION_OBSERVER&&'MutationObserver'in window){this._domObserver=new MutationObserver(this._checkForIntersections);this._domObserver.observe(document,{attributes:true,childList:true,characterData:true,subtree:true});}}}};IntersectionObserver.prototype._unmonitorIntersections=function(){if(this._monitoringIntersections){this._monitoringIntersections=false;clearInterval(this._monitoringInterval);this._monitoringInterval=null;removeEvent(window,'resize',this._checkForIntersections,true);removeEvent(document,'scroll',this._checkForIntersections,true);if(this._domObserver){this._domObserver.disconnect();this._domObserver=null;}}};IntersectionObserver.prototype._checkForIntersections=function(){var rootIsInDom=this._rootIsInDom();var rootRect=rootIsInDom?this._getRootRect():getEmptyRect();this._observationTargets.forEach(function(item){var target=item.element;var targetRect=getBoundingClientRect(target);var rootContainsTarget=this._rootContainsTarget(target);var oldEntry=item.entry;var intersectionRect=rootIsInDom&&rootContainsTarget&&this._computeTargetAndRootIntersection(target,rootRect);var newEntry=item.entry=new IntersectionObserverEntry({time:now(),target:target,boundingClientRect:targetRect,rootBounds:rootRect,intersectionRect:intersectionRect});if(!oldEntry){this._queuedEntries.push(newEntry);}else if(rootIsInDom&&rootContainsTarget){if(this._hasCrossedThreshold(oldEntry,newEntry)){this._queuedEntries.push(newEntry);}}else{if(oldEntry&&oldEntry.isIntersecting){this._queuedEntries.push(newEntry);}}},this);if(this._queuedEntries.length){this._callback(this.takeRecords(),this);}};IntersectionObserver.prototype._computeTargetAndRootIntersection=function(target,rootRect){if(window.getComputedStyle(target).display=='none')return;var targetRect=getBoundingClientRect(target);var intersectionRect=targetRect;var parent=getParentNode(target);var atRoot=false;while(!atRoot){var parentRect=null;var parentComputedStyle=parent.nodeType==1?window.getComputedStyle(parent):{};if(parentComputedStyle.display=='none')return;if(parent==this.root||parent==document){atRoot=true;parentRect=rootRect;}else{if(parent!=document.body&&parent!=document.documentElement&&parentComputedStyle.overflow!='visible'){parentRect=getBoundingClientRect(parent);}}\r\nif(parentRect){intersectionRect=computeRectIntersection(parentRect,intersectionRect);if(!intersectionRect)break;}\r\nparent=getParentNode(parent);}\r\nreturn intersectionRect;};IntersectionObserver.prototype._getRootRect=function(){var rootRect;if(this.root){rootRect=getBoundingClientRect(this.root);}else{var html=document.documentElement;var body=document.body;rootRect={top:0,left:0,right:html.clientWidth||body.clientWidth,width:html.clientWidth||body.clientWidth,bottom:html.clientHeight||body.clientHeight,height:html.clientHeight||body.clientHeight};}\r\nreturn this._expandRectByRootMargin(rootRect);};IntersectionObserver.prototype._expandRectByRootMargin=function(rect){var margins=this._rootMarginValues.map(function(margin,i){return margin.unit=='px'?margin.value:margin.value*(i%2?rect.width:rect.height)/100;});var newRect={top:rect.top-margins[0],right:rect.right+margins[1],bottom:rect.bottom+margins[2],left:rect.left-margins[3]};newRect.width=newRect.right-newRect.left;newRect.height=newRect.bottom-newRect.top;return newRect;};IntersectionObserver.prototype._hasCrossedThreshold=function(oldEntry,newEntry){var oldRatio=oldEntry&&oldEntry.isIntersecting?oldEntry.intersectionRatio||0:-1;var newRatio=newEntry.isIntersecting?newEntry.intersectionRatio||0:-1;if(oldRatio===newRatio)return;for(var i=0;i<this.thresholds.length;i++){var threshold=this.thresholds[i];if(threshold==oldRatio||threshold==newRatio||threshold<oldRatio!==threshold<newRatio){return true;}}};IntersectionObserver.prototype._rootIsInDom=function(){return!this.root||containsDeep(document,this.root);};IntersectionObserver.prototype._rootContainsTarget=function(target){return containsDeep(this.root||document,target);};IntersectionObserver.prototype._registerInstance=function(){if(registry.indexOf(this)<0){registry.push(this);}};IntersectionObserver.prototype._unregisterInstance=function(){var index=registry.indexOf(this);if(index!=-1)registry.splice(index,1);};function now(){return window.performance&&performance.now&&performance.now();}\r\nfunction throttle(fn,timeout){var timer=null;return function(){if(!timer){timer=setTimeout(function(){fn();timer=null;},timeout);}};}\r\nfunction addEvent(node,event,fn,opt_useCapture){if(typeof node.addEventListener=='function'){node.addEventListener(event,fn,opt_useCapture||false);}\r\nelse if(typeof node.attachEvent=='function'){node.attachEvent('on'+event,fn);}}\r\nfunction removeEvent(node,event,fn,opt_useCapture){if(typeof node.removeEventListener=='function'){node.removeEventListener(event,fn,opt_useCapture||false);}\r\nelse if(typeof node.detatchEvent=='function'){node.detatchEvent('on'+event,fn);}}\r\nfunction computeRectIntersection(rect1,rect2){var top=Math.max(rect1.top,rect2.top);var bottom=Math.min(rect1.bottom,rect2.bottom);var left=Math.max(rect1.left,rect2.left);var right=Math.min(rect1.right,rect2.right);var width=right-left;var height=bottom-top;return(width>=0&&height>=0)&&{top:top,bottom:bottom,left:left,right:right,width:width,height:height};}\r\nfunction getBoundingClientRect(el){var rect;try{rect=el.getBoundingClientRect();}catch(err){}\r\nif(!rect)return getEmptyRect();if(!(rect.width&&rect.height)){rect={top:rect.top,right:rect.right,bottom:rect.bottom,left:rect.left,width:rect.right-rect.left,height:rect.bottom-rect.top};}\r\nreturn rect;}\r\nfunction getEmptyRect(){return{top:0,bottom:0,left:0,right:0,width:0,height:0};}\r\nfunction containsDeep(parent,child){var node=child;while(node){if(node==parent)return true;node=getParentNode(node);}\r\nreturn false;}\r\nfunction getParentNode(node){var parent=node.parentNode;if(parent&&parent.nodeType==11&&parent.host){return parent.host;}\r\nif(parent&&parent.assignedSlot){return parent.assignedSlot.parentNode;}\r\nreturn parent;}\r\nwindow.IntersectionObserver=IntersectionObserver;window.IntersectionObserverEntry=IntersectionObserverEntry;}());"],"mappings":"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"}